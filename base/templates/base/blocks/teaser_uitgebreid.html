{% load wagtailcore_tags %}

<article class="workshop-teaser p-4 border rounded shadow">
    <a href="{{ self.workshop_page.url }}" class="block">
        <div class="image mb-2">
            {% if self.override_image %}
                <img src="{{ self.override_image.url }}" alt="{{ self.override_image.title }}">
            {% elif self.workshop_page.main_image %}
                <img src="{{ self.workshop_page.main_image.url }}" alt="{{ self.workshop_page.title }}">
            {% endif %}
        </div>
        <h3 class="text-xl font-bold">{{ self.workshop_page.title }}</h3>

        {% if self.custom_label %}
            <span class="text-sm text-indigo-600">{{ self.custom_label }}</span>
        {% else %}
            <span class="text-sm text-gray-600">{{ self.workshop_page.get_display_status }}</span>
        {% endif %}

        <p class="mt-2 text-sm">
            {{ self.workshop_page.location }} â€“
            {% with self.workshop_page.sessions.0.value.date as first_date %}
                {% if first_date %}{{ first_date|date:"d M Y" }}{% endif %}
            {% endwith %}
        </p>
    </a>
</article>
